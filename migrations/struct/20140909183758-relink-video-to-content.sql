ALTER TABLE comments DROP COLUMN video_id;
ALTER TABLE comments ADD COLUMN content_id INT NOT NULL;

CREATE INDEX IDX_AA5B128EB36ED395 ON comments (content_id);

ALTER TABLE
  comments
ADD
  CONSTRAINT KF_AA5B128EB36ED395 FOREIGN KEY (content_id) REFERENCES contents (id) NOT DEFERRABLE INITIALLY IMMEDIATE;

ALTER TABLE
  badge_user_bridges
DROP CONSTRAINT fk_3b83999e29c1004e,
DROP CONSTRAINT fk_3b83999e40e556f5;

ALTER TABLE badge_user_bridges
  ADD CONSTRAINT fk_3b83999e29c1004e
    FOREIGN KEY (video_id)
    REFERENCES contents (id)
    ON UPDATE NO ACTION ON DELETE NO ACTION NOT DEFERRABLE INITIALLY IMMEDIATE,
  ADD CONSTRAINT fk_3b83999e40e556f5
    FOREIGN KEY (blueprint_id)
    REFERENCES contents (id)
    ON UPDATE NO ACTION ON DELETE NO ACTION NOT DEFERRABLE INITIALLY IMMEDIATE;

DROP INDEX idx_3b83999e29c1004e;
DROP INDEX idx_3b83999e40e556f5;

ALTER TABLE
  video_views
  DROP CONSTRAINT fk_9e92952529c1004e;
ALTER TABLE
  video_views
  ADD CONSTRAINT fk_9e92952529c1004e
  FOREIGN KEY (video_id) REFERENCES contents (id)
  ON UPDATE NO ACTION ON DELETE NO ACTION NOT DEFERRABLE INITIALLY IMMEDIATE;
