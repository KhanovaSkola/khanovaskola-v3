var App={};App.error=function(r){console.error("Error:",r)},App.getTime=function(){var r=new Date;return r.getTime()},App.getTimer=function(){var r=App.getTime();return function(){return App.getTime()-r}};
function transliterate(e){e=String(e);var a=" ",i={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ő":"O","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ű":"U","Ý":"Y","Þ":"TH","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ű":"u","ý":"y","þ":"th","ÿ":"y","©":"(c)","Α":"A","Β":"B","Γ":"G","Δ":"D","Ε":"E","Ζ":"Z","Η":"H","Θ":"8","Ι":"I","Κ":"K","Λ":"L","Μ":"M","Ν":"N","Ξ":"3","Ο":"O","Π":"P","Ρ":"R","Σ":"S","Τ":"T","Υ":"Y","Φ":"F","Χ":"X","Ψ":"PS","Ω":"W","Ά":"A","Έ":"E","Ί":"I","Ό":"O","Ύ":"Y","Ή":"H","Ώ":"W","Ϊ":"I","Ϋ":"Y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"h","ώ":"w","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","Ş":"S","İ":"I","Ç":"C","Ü":"U","Ö":"O","Ğ":"G","ş":"s","ı":"i","ç":"c","ü":"u","ö":"o","ğ":"g","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"Yo","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sh","Ъ":"","Ы":"Y","Ь":"","Э":"E","Ю":"Yu","Я":"Ya","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"yo","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya","Є":"Ye","І":"I","Ї":"Yi","Ґ":"G","є":"ye","і":"i","ї":"yi","ґ":"g","Č":"C","Ď":"D","Ě":"E","Ň":"N","Ř":"R","Š":"S","Ť":"T","Ů":"U","Ž":"Z","č":"c","ď":"d","ě":"e","ň":"n","ř":"r","š":"s","ť":"t","ů":"u","ž":"z","Ą":"A","Ć":"C","Ę":"e","Ł":"L","Ń":"N","Ó":"o","Ś":"S","Ź":"Z","Ż":"Z","ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ó":"o","ś":"s","ź":"z","ż":"z","Ā":"A","Č":"C","Ē":"E","Ģ":"G","Ī":"i","Ķ":"k","Ļ":"L","Ņ":"N","Š":"S","Ū":"u","Ž":"Z","ā":"a","č":"c","ē":"e","ģ":"g","ī":"i","ķ":"k","ļ":"l","ņ":"n","š":"s","ū":"u","ž":"z"};for(var o in i)e=e.replace(RegExp(o,"g"),i[o]);var g="undefined"==typeof XRegExp?RegExp("[^a-z0-9]+","ig"):XRegExp("[^\\p{L}\\p{N}]+","ig");return e=e.replace(g,a),e=e.replace(RegExp("["+a+"]{2,}","g"),a),e=e.replace(RegExp("(^"+a+"|"+a+"$)","g"),"")}
$(function(){var i=$("[data-exercise]");if(i.length){App.onInactive.add(function(){i.find("[name=inactivity]").val(!0)});var n=App.getTimer("exercise");i.on("submit",function(){$(this).find("[name=time]").val(n())});var t=i.find("[data-hint]").hide().toArray();$("[data-show-hint]").click(function(){i.find("[name=hint]").val(!0),$(t.shift()).show(),t.length||$(this).hide()})}});
$(function(){var o=$(".dropdown-big");$(".dropdown-big .dropdown-toggle").on("click",function(){return console.log("open"),o.toggleClass("open"),o.parents("header").toggleClass("hover"),!1}),$("body").children().not("header").on("click",function(){console.log("close"),o.removeClass("open"),o.parents("header").removeClass("hover")}),$(".ul-tab a").click(function(o){return o.preventDefault(),$(this).tab("show"),!1})});
App._idleSince=null,App._resetIdleTime=function(){App._idleSince=App.getTime()},App._checkIdle=function(){if(null!==App._idleSince){var e=App.getTime()-App._idleSince;e>6e4&&(App.onInactive.fire(),App._idleSince=null)}},App._resetIdleTime(),App.onInactive=$.Callbacks(),$(document).mousemove(App._resetIdleTime),$(document).keypress(App._resetIdleTime),setInterval(App._checkIdle,250);
$(function(){$("time").timeago()});
window.location.hash&&"#_=_"==window.location.hash&&(window.location.hash=""),window.history.replaceState&&(l=window.location.toString(),uri=l.indexOf("_fid="),-1!=uri&&(uri=l.substr(0,uri)+l.substr(uri+10),("?"==uri.substr(uri.length-1)||"&"==uri.substr(uri.length-1))&&(uri=uri.substr(0,uri.length-1)),window.history.replaceState("",document.title,uri)));
App.elasticSearch=new $.es.Client({hosts:"http://localhost:9200"}),App.autocomplete=function(t,e){App.elasticSearch.search({index:"khanovaskola",type:"content",body:{query:{match:{title:t}},highlight:{pre_tags:["<strong>"],post_tags:["</strong>"],fields:{title:{number_of_fragments:0}}}}}).then(function(t){var i=[];$.each(t.hits.hits,function(t,e){i.push({id:e._id,value:e._source.title,highlit:"title"in e.highlight?e.highlight.title[0]:e._source.title})}),e(i)})},$(function(){$("#frm-search-form-query").typeahead({hint:!0,highlight:!1,minLength:1},{name:"states",source:function(t,e){App.autocomplete(t,function(t){e(t)})}})});
!function(){if($form=$("#frm-blueprintEditor-form"),$form.length){var n={};n.saveHook=function(n,a,r){var e=function(){for(var e in r)n[e]=r[e].val();a.val(JSON.stringify(n))};for(var t in r)r[t].on("change",e);e()},n.render=function(a,r){var e=$("<div></div>").text("type: "+a.type);r.hide(),r.after(e);var t="render"+a.type.charAt(0).toUpperCase()+a.type.slice(1);n[t](a,e,r)},n.renderInteger=function(a,r,e){var t=$('<input type="number" class="form-control">').val(a.min),i=$('<input type="number" class="form-control">').val(a.max);r.append(t).append(i),n.saveHook(a,e,{min:t,max:i})},n.renderPlural=function(a,r,e){var t={},i=["count","one","few","many"];for(var o in i){var f=i[o];t[f]=$('<input class="form-control">').val(a[f]),r.append(t[f])}n.saveHook(a,e,t)},n.renderList=function(n,a,r){var e={};for(var t in n.list){e[t]=$('<input class="form-control">').val(n.list[t]),a.append(e[t]);var i=function(){n.list=[];for(var a in e)n.list.push(e[a].val());r.val(JSON.stringify(n))};e[t].on("change",i),i()}r.val(JSON.stringify(n))},$form.find("[data-definition]").each(function(a,r){var e=JSON.parse($(r).val());n.render(e,$(r))});var a=$form.find("[data-definitions]");$form.find("[data-add-type]").on("click",function(){var r=$(this).data("add-type"),e=a.find("[data-definition]").length,t=$('<input name="vars['+e+'][name]" class="form-control">'),i=$('<input name="vars['+e+'][definition]" data-definition class="form-control">');a.append(t).append(i);var o={type:r};"integer"===r?(o.min=0,o.max=100):"list"===r?o.list=[]:"plural"===r&&(o={type:r,count:"<eval></eval>",one:"",few:"",many:""}),n.render(o,i)});var r,e,t;a.find("[data-var-remove]").click(function(n){t&&t.remove();var i=$(n.target),o=a.find('[data-var-id="'+i.data("var-remove")+'"]');e=$("<div></div>"),o.after(e),t=$('<a class="btn btn-link"></a>').text(i.data("label-undo")).on("click",function(){e.after(r),e.remove(),t.remove()}),o.after(t),o.detach(),r=o})}}();
$(function(){if($form=$("#frm-linkStudentsForm-form"),$form.length){var n=$form.find("input[type=email]").last().clone();$form.countEmpty=function(){var n=0;return $(this).find("input[type=email]").each(function(t,o){$(o).val().trim()||n++}),n},$form.on("change keyup paste","input[type=email]",function(){if(console.log($form.countEmpty()),$form.countEmpty()<1){var t=n.clone(),o=$form.find("input[type=email]").length;t.attr("name","emails["+o+"][email]"),$form.find(".form-group").append(t)}})}});
$(function(){$form=$("#frm-loginForm-form"),$form.length&&$form.find('input[name="email"]').on("change paste keyup",function(){var e=$("[data-password-reset]"),a=e.data("password-reset")+"?email="+encodeURIComponent($(this).val());e.attr("href",a)})});
$(function(){$form=$("#frm-registrationForm-form"),$form.length&&($form.find('input[name="name"]').on("change paste keyup",function(){/ov(á|a)\s*$/.test($(this).val())&&$("#frm-registrationForm-form-gender-female").prop("checked",!0)}),$form.find('input[name="password"]').on("change paste keyup",function(){var n=[],a=$form.find('input[name="email"]').val();n.push(a),n.push.apply(n,a.split("@"));var r=$form.find('input[name="name"]').val();n.push(r),n.push.apply(n,r.split(" "));var p=transliterate(r);n.push(p),n.push.apply(n,p.split(" "));var e=zxcvbn($(this).val(),n);$(this).parents(".form-group").toggleClass("has-warning",e.entropy<30)}))});
//# sourceMappingURL=app.min.js.map